

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>CSS Transformation &mdash; Rain 0.18.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.18.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Rain 0.18.0 documentation" href="../index.html" />
    <link rel="next" title="Dashboard Component Model" href="Features-proposal-dashboard-component-model.html" />
    <link rel="prev" title="Client Runtime Storage" href="Features-proposal-client-storage.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="Features-proposal-dashboard-component-model.html" title="Dashboard Component Model"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="Features-proposal-client-storage.html" title="Client Runtime Storage"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">Rain 0.18.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="css-transformation">
<h1>CSS Transformation<a class="headerlink" href="#css-transformation" title="Permalink to this headline">¶</a></h1>
<p>RAIN must handle correctly two fragments included in the same view via the webcomponent protocol that define the same CSS selectors and solve name clash automatically. Also it should permit to the author of the page to associate the specific CSS class with the component in the page.</p>
<div class="section" id="functional-requirements">
<h2>Functional requirements<a class="headerlink" href="#functional-requirements" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Rain should support the inclusion of multiple CSS files from different modules.</li>
<li>Releasing a new version of a module that is used as a resource / components repository via webcomponent by another module should not impact the code stability of the client module.</li>
</ol>
</div>
<div class="section" id="assumptions">
<h2>Assumptions<a class="headerlink" href="#assumptions" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Rain will decorate each fragment with an html block element (probably div).</li>
</ol>
</div>
<div class="section" id="implementation">
<h2>Implementation<a class="headerlink" href="#implementation" title="Permalink to this headline">¶</a></h2>
<p>Below you can see two examples of including css files (with module version or latest version) using webcomponent protocol:</p>
<div class="highlight-html"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span class="nt">&lt;head&gt;</span>
  <span class="nt">&lt;title&gt;</span>Page Title<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">&quot;Content-Type&quot;</span> <span class="na">content=</span><span class="s">&quot;text/html; charset=UTF-8&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span> <span class="na">href=</span><span class="s">&quot;webcomponent://core-components;1.0/htdocs/css/application.css&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span> <span class="na">href=</span><span class="s">&quot;webcomponent://cp-components;1.0/htdocs/css/application.css&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/head&gt;</span>
</pre></div>
</td></tr></table></div>
<div class="highlight-html"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span class="nt">&lt;head&gt;</span>
  <span class="nt">&lt;title&gt;</span>Page Title<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">&quot;Content-Type&quot;</span> <span class="na">content=</span><span class="s">&quot;text/html; charset=UTF-8&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span> <span class="na">href=</span><span class="s">&quot;webcomponent://core-components/htdocs/css/application.css&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span> <span class="na">href=</span><span class="s">&quot;webcomponent://cp-components/htdocs/css/application.css&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/head&gt;</span>
</pre></div>
</td></tr></table></div>
<p>The Rain platform should:</p>
<ol class="arabic simple">
<li>Recompile the CSS files involved in the lesscss.org style and provide to the client module the styles needed in order to properly render the content.</li>
<li>Resolve the case where no particular version of a module is specified and use the latest registered version.</li>
<li>Regarding the permissions, it is safe to say that all the pages should be able to use CSS resources from other (service) modules, and no permission to access the service module is to be required from the end-user.</li>
</ol>
</div>
<div class="section" id="details">
<h2>Details<a class="headerlink" href="#details" title="Permalink to this headline">¶</a></h2>
<p>All identified css classes from the aggregator page will be consolidated within one single file (or accessible url). Each class will be prefixed with a key composed from module identifier and module version. What happens when we have nested fragments? For instance we have the following scenario:</p>
<p>The block element generated by Rain (assumption 1) will automatically contain in the class attribute the key added in css to avoid name clashes. This solves the issue transparently for the developer and is not constraint to a specific number of nested levels.</p>
</div>
<div class="section" id="questions">
<h2>Questions<a class="headerlink" href="#questions" title="Permalink to this headline">¶</a></h2>
<p>What happens when we have nested fragments? For instance we have the following scenario:</p>
<ol class="arabic simple">
<li>Q: What happens when we have nested fragments? For instance we have the following scenario:</li>
</ol>
<blockquote>
<div><div class="highlight-html"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="highlight"><pre><span class="c">&lt;!--main view--&gt;</span>
<span class="nt">&lt;head&gt;</span>
  <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href=</span><span class="s">&quot;webcomponent://example;1.0/htdocs/css/test.css&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>Features-proposal-css-transformation
  <span class="nt">&lt;fragment1</span> <span class="nt">/&gt;</span>

  <span class="nt">&lt;fragment1</span> <span class="nt">/&gt;</span>

  <span class="nt">&lt;fragment1</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/body&gt;</span>

....

<span class="c">&lt;!--fragment1 view--&gt;</span>
<span class="nt">&lt;head&gt;</span>
  <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href=</span><span class="s">&quot;webcomponent://example;1.1/htdocs/css/test2.css&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/head&gt;</span>

<span class="nt">&lt;body&gt;</span>
  <span class="nt">&lt;p&gt;</span>Ta na na na na. Css possible class clash?<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/body&gt;</span>
</pre></div>
</td></tr></table></div>
<p>A: First let&#8217;s mock the content of each css file.</p>
<blockquote>
<div><div class="highlight-css"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span class="o">&lt;!</span><span class="nt">--</span> <span class="nt">test</span><span class="nc">.css</span> <span class="nt">--</span><span class="o">&gt;</span>
<span class="nc">.myTestClass</span> <span class="p">{</span><span class="k">background-color</span><span class="o">:</span> <span class="nb">red</span><span class="p">;}</span>

<span class="o">&lt;!</span><span class="nt">--</span> <span class="nt">test2</span><span class="nc">.css</span> <span class="nt">--</span><span class="o">&gt;</span>
<span class="nc">.myTestClass</span> <span class="p">{</span><span class="k">background-color</span><span class="o">:</span> <span class="nb">red</span><span class="p">;}</span>
</pre></div>
</td></tr></table></div>
<p>Rain consolidates both css files into:</p>
<div class="highlight-css"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span class="o">&lt;!</span><span class="nt">--</span> <span class="o">.....</span> <span class="nt">consolidated-url</span><span class="nc">.css</span> <span class="nt">--</span><span class="o">&gt;</span>
<span class="o">&lt;!</span><span class="nt">--</span> <span class="nt">test</span><span class="nc">.css</span> <span class="nt">--</span><span class="o">&gt;</span>
<span class="nc">.example-1.0</span> <span class="nc">.myTestClass</span> <span class="p">{</span><span class="k">background-color</span><span class="o">:</span> <span class="nb">red</span><span class="p">;}</span>
<span class="o">&lt;!</span><span class="nt">--</span> <span class="nt">test2</span><span class="nc">.css</span> <span class="nt">--</span><span class="o">&gt;</span>
<span class="nc">.example-1.1</span> <span class="nc">.myTestClass</span> <span class="p">{</span><span class="k">background-color</span><span class="o">:</span> <span class="nb">red</span><span class="p">;}</span>
</pre></div>
</td></tr></table></div>
<p>The resulting html seen in client browser is:</p>
<div class="highlight-html"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span class="c">&lt;!--main view--&gt;</span>
<span class="nt">&lt;head&gt;</span>
  <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href=</span><span class="s">&quot;..... consolidated-url.css&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;example-1.0&quot;</span> <span class="na">id=</span><span class="s">&quot;[unique identifier at dom level generated by RAIN]&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;p&gt;</span>Ta na na na na. Css possible class clash?<span class="nt">&lt;/p&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/body&gt;</span>
</pre></div>
</td></tr></table></div>
</div></blockquote>
</div></blockquote>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">CSS Transformation</a><ul>
<li><a class="reference internal" href="#functional-requirements">Functional requirements</a></li>
<li><a class="reference internal" href="#assumptions">Assumptions</a></li>
<li><a class="reference internal" href="#implementation">Implementation</a></li>
<li><a class="reference internal" href="#details">Details</a></li>
<li><a class="reference internal" href="#questions">Questions</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="Features-proposal-client-storage.html"
                        title="previous chapter">Client Runtime Storage</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="Features-proposal-dashboard-component-model.html"
                        title="next chapter">Dashboard Component Model</a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="Features-proposal-dashboard-component-model.html" title="Dashboard Component Model"
             >next</a> |</li>
        <li class="right" >
          <a href="Features-proposal-client-storage.html" title="Client Runtime Storage"
             >previous</a> |</li>
        <li><a href="../index.html">Rain 0.18.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>